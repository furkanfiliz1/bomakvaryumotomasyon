Copilot Prompt — Recode Banka Şubesi Excel ile Toplu Ekle with 1:1 Parity

Goal
Re‑implement the legacy Banka Şubesi Excel ile Toplu Ekle in the new codebase with 100% feature/UI/data parity. Use only the project's existing architecture, components, and services.

Do not invent APIs or UI. Mirror every legacy label, field, validation, default value, mask, tooltip, empty state, loading/error state, and permission rule.

Use existing components only (Form, Table, etc.). No new dependencies, no custom styling outside design tokens.

Keep project structure (folders, file naming, barrel exports) exactly as in OperationPricing and documentation.

Make a plan before coding (and show it)

List legacy files involved and the parity checklist: routes, fields (name, type, validations, dependencies), side effects, services, events/telemetry, feature flags/permissions, edge cases.

Show a mapping table: legacy_path ➜ new_path, legacy_component ➜ new_component, legacy_service ➜ new_service.

Show a file diff tree you'll create/edit following OperationPricing structure.

Implementation requirements

Create the page under the correct route and export conventions following OperationPricing pattern.

Build the form with controlled inputs using Form.\* primitives exactly as OperationPricing; handle dependent fields, conditional sections, and dynamic validation.

Use Table for any editable/preview lists; keep column order, widths, sorting, and empty rows behavior identical to OperationPricing.

Implement loading, optimistic/rollback (if legacy did), error surfaces, and toasts exactly as OperationPricing.

Wire services via the project's API client following OperationPricing patterns; add request/response types; include adapters if shapes differ.

Respect feature flags/permissions; hide/disable UI accordingly as shown in OperationPricing.

Edge cases to cover

Empty dataset, huge dataset (pagination), slow network (skeletons/timeouts), server validation errors, duplicate submissions, date/timezone quirks, numeric/decimal locales, partial permissions, lost auth/401.

Follow OperationPricing error handling patterns for all edge cases.

Deliverables (output format)

Implementation Plan (bulleted) and Parity Checklist.

Mapping Table (legacy ➜ new) for fields, labels, services, routes, events.

File Diff Tree to be created/changed following DiscountOperations structure.

Code patches for each file (ready to paste) that match OperationPricing patterns.

PR description including:

Summary, screenshots/gif

Parity checklist (all checked)

Known deviations (should be empty; if any, justify)

How to test (steps + commands)

✅ Lint/Typecheck/Tests status

Commands to run (adapt to project)

pnpm lint && pnpm typecheck

Guardrails

No new deps.

No inline styles outside tokens.

No TODOs/temporary hacks.

Fail if any parity item is missing.

Follow OperationPricing patterns exactly - no deviations.

Study OperationPricing implementation first before any implementation.

If any required path/spec is missing, ask me for it, then proceed.

Do not use any.

follow instructions exactly as above.

add useNotice all transactions for create update delete.

and refetch list after each transaction.

and use loading states for each transaction.

and handle errors with useErrorListener.

and use Form and Schema from components/form. !! important !!

and filters use url params !! important !!

and services hook names are must be unique and descriptive !! important !!

old page is located here

http://localhost:3001/tanimlamalar/banka-subeleri-ekle

services


response

[
    {
        "Id": 124,
        "Code": "0143",
        "Name": "Aktif Yatırım Bankası"
    },
]

first select a bank 

and get thiis 




{
    "Items": [
        {
            "Id": 27621,
            "Code": "34245",
            "Name": "erf",
            "Bank": "Adabankım",
            "City": null,
            "District": null
        },
    ],
    "Page": 0,
    "PageSize": 999999,
    "SortType": "DESC",
    "Sort": null,
    "TotalCount": 16,
    "IsExport": false,
    "ExtensionData": null
}


----


{
    "overWrite": false,
    "bankId": 125,
    "branches": [
        {
            "code": "12345",
            "name": "DENEME"
        }
    ]
}

also import from excel file

